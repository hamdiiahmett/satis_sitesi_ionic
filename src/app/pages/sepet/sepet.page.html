<ion-header class="ion-no-border">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home" text="" icon="arrow-back"></ion-back-button>
    </ion-buttons>
    <ion-title style="font-weight: 600;">Sepetim</ion-title>
    
    <ion-buttons slot="end">
      <ion-button *ngIf="sepetUrunleri.length > 0" (click)="sepetiTemizle()" color="light">
        <ion-icon name="trash-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="bg-light">

  <div *ngIf="sepetUrunleri.length === 0" class="empty-cart-container">
    <div class="empty-icon-circle">
      <ion-icon name="cart-outline"></ion-icon>
    </div>
    <h3>Sepetin Şu An Boş!</h3>
    <p>Hemen alışverişe başla, fırsatları kaçırma.</p>
    <ion-button routerLink="/home" shape="round" class="start-shopping-btn">
      Alışverişe Başla
    </ion-button>
  </div>

  <div *ngIf="sepetUrunleri.length > 0" class="cart-list">
    
    <ion-item-sliding *ngFor="let urun of sepetUrunleri; let i = index" [style.--animation-order]="i">
      
      <ion-item lines="none" class="cart-item-card">
        
        <div slot="start" class="img-wrapper">
          <img [src]="urun.thumbnail" />
        </div>

        <ion-label>
          <h2>{{ urun.title }}</h2>
          <p class="unit-price">Birim: ${{ urun.price }}</p>
          
          <div class="bottom-row">
            <span class="qty-badge">x{{ urun.quantity || 1 }}</span>
            <span class="total-price">${{ (urun.price * (urun.quantity || 1)).toFixed(2) }}</span>
          </div>
        </ion-label>

        <ion-button slot="end" fill="clear" color="medium" (click)="sil(urun)">
          <ion-icon name="close-circle-outline" style="font-size: 1.5rem;"></ion-icon>
        </ion-button>

      </ion-item>

      <ion-item-options side="end">
        <ion-item-option color="danger" (click)="sil(urun)">
          <ion-icon name="trash" slot="top"></ion-icon>
          Sil
        </ion-item-option>
      </ion-item-options>
      
    </ion-item-sliding>

  </div>
  
  <div style="height: 100px;"></div>

</ion-content>

<ion-footer *ngIf="sepetUrunleri.length > 0" class="ion-no-border">
  <div class="checkout-bar">
    <div class="total-info">
      <span class="label">Toplam ({{ toplamAdet }} Ürün)</span>
      <span class="value">${{ toplamTutar.toFixed(2) }}</span>
    </div>
    
    <ion-button class="checkout-btn" (click)="satinAl()">
      SATIN AL <ion-icon name="arrow-forward" slot="end"></ion-icon>
    </ion-button>
  </div>
</ion-footer>